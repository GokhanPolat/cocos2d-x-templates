

function _copy() {
    script_dir=$(cd $(dirname ${BASH_SOURCE:-$0}); pwd)
    xcode_template_path="/Applications/Xcode.app/Contents/Developer/Library/Xcode/Templates/File Templates/cocos2d-x"

    echo $'\e[32mCopy template files into xcode template directory\e[m' 1>&2

    echo $'\e[33mMake sure create a directory below (and if you have already, remove it before copy files).\e[m' 1>&2
    echo $xcode_template_path 1>&2

    read -p "Continue (y/n)?" choice
    case "$choice" in 
        y|Y ) echo "yes";;
        n|N ) echo "no";;
        * ) echo "invalid";;
    esac

    echo $'\e[32mAlso needs a permission for root user, if you trust me, please enter your password\e[m' 1>&2

    sudo mkdir -p "$xcode_template_path"
    sudo rm -rf "$xcode_template_path"
    sudo cp -r $script_dir/../*.xctemplate "$xcode_template_path"
}

function _clean() {
    script_dir=$(cd $(dirname ${BASH_SOURCE:-$0}); pwd)
    xcode_template_path="/Applications/Xcode.app/Contents/Developer/Library/Xcode/Templates/File Templates/cocos2d-x"

    echo $'\e[32mRemove all template files which are generated by this script\e[m' 1>&2

    echo $'\e[33mMake sure remove a directory below\e[m' 1>&2
    echo $xcode_template_path 1>&2

    read -p "Continue (y/n)?" choice
    case "$choice" in 
        y|Y ) echo "yes";;
        n|N ) echo "no";;
        * ) echo "invalid";;
    esac

    echo $'\e[32mAlso needs a permission for root user, if you trust me, please enter your password\e[m' 1>&2

    sudo rm -rf "$xcode_template_path"
}


##-----------------------------------------------
# main
##-----------------------------------------------
if [ -z $1 ]; then
    _copy
else
    "_$1"
fi
